# PlanCraft Agent - í”„ë¡œì íŠ¸ êµ¬ì¡°ë„

> ğŸ“… ìµœì¢… ì—…ë°ì´íŠ¸: 2025-12-29

---

## âš¡ Quick Reference (IDE ê°œë°œìš©)

### ğŸ”¥ í•µì‹¬ ëª…ë ¹ì–´

```bash
# 1. ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv venv
.\venv\Scripts\activate      # Windows
# source venv/bin/activate   # Linux/Mac

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env.local
# .env.local íŒŒì¼ ìˆ˜ì • (API í‚¤ ì…ë ¥)

# 4. RAG ì¸ë±ìŠ¤ ì´ˆê¸°í™” (ìµœì´ˆ 1íšŒ)
python -c "from rag.vectorstore import init_vectorstore; init_vectorstore()"

# 5. ì‹¤í–‰ ğŸš€
streamlit run app.py

# í…ŒìŠ¤íŠ¸
pytest tests/ -v
```

### ğŸ“ í•µì‹¬ íŒŒì¼ ìœ„ì¹˜

| ìš©ë„ | íŒŒì¼ ìœ„ì¹˜ |
|------|-----------|
| ë©”ì¸ ì•± | `app.py` |
| ì›Œí¬í”Œë¡œìš° | `graph/workflow.py` |
| ìƒíƒœ ì •ì˜ | `graph/state.py` |
| ì—ì´ì „íŠ¸ | `agents/*.py` |
| í”„ë¡¬í”„íŠ¸ | `prompts/*_prompt.py` |
| ìŠ¤í‚¤ë§ˆ | `utils/schemas.py` |
| í™˜ê²½ì„¤ì • | `utils/config.py` |
| ì›¹ê²€ìƒ‰ | `tools/web_search.py` |

### ğŸ¤– ì—ì´ì „íŠ¸ íë¦„ ìš”ì•½

```
ì‚¬ìš©ì ì…ë ¥ â†’ Analyzer â†’ Structurer â†’ Writer â†’ Reviewer â†’ Refiner â†’ Formatter â†’ ì¶œë ¥
```

### ğŸ”‘ í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜

```ini
AOAI_ENDPOINT=https://xxx.openai.azure.com/
AOAI_API_KEY=your_key
AOAI_DEPLOY_GPT4O=gpt-4o
AOAI_DEPLOY_GPT4O_MINI=gpt-4o-mini
AOAI_DEPLOY_EMBED_3_LARGE=text-embedding-3-large
```

### ğŸ› ï¸ ê°œë°œ ì‹œ ì£¼ìš” ìˆ˜ì • í¬ì¸íŠ¸

| ì‘ì—… | ìˆ˜ì • íŒŒì¼ |
|------|-----------|
| ì—ì´ì „íŠ¸ ë¡œì§ ë³€ê²½ | `agents/{agent_name}.py` |
| í”„ë¡¬í”„íŠ¸ ìˆ˜ì • | `prompts/{agent_name}_prompt.py` |
| ì›Œí¬í”Œë¡œìš° ë³€ê²½ | `graph/workflow.py` |
| State í•„ë“œ ì¶”ê°€ | `graph/state.py` |
| UI ì»´í¬ë„ŒíŠ¸ ìˆ˜ì • | `ui/components.py` |
| RAG ë¬¸ì„œ ì¶”ê°€ | `rag/documents/*.md` â†’ ì¬ì¸ë±ì‹± í•„ìš” |
| ì›¹ê²€ìƒ‰ ì¡°ê±´ ë³€ê²½ | `tools/web_search.py` |

### ğŸ“Š State í•µì‹¬ í•„ë“œ

```python
# ì…ë ¥
user_input: str          # ì‚¬ìš©ì ìš”ì²­
file_content: str        # ì—…ë¡œë“œ íŒŒì¼

# ì¶œë ¥
final_output: str        # ìµœì¢… ê¸°íšì„œ
chat_summary: str        # ì±„íŒ… ìš”ì•½

# ë‚´ë¶€
analysis: dict           # Analyzer ê²°ê³¼
structure: dict          # Structurer ê²°ê³¼
draft: dict              # Writer ê²°ê³¼
review: dict             # Reviewer ê²°ê³¼
```

---

## ï¿½ï¸ ì‹¤í–‰ ê²°ê³¼

### ì„œë¹„ìŠ¤ ì‹¤í–‰ ê²°ê³¼ (Console)

```bash
$ streamlit run app.py

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://192.168.x.x:8501

  Ready! âœ¨
```

### ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ê³¼ì •

```
[10:30:01] ğŸš€ ì›Œí¬í”Œë¡œìš° ì‹œì‘
[10:30:02] ğŸ“š RAG ê²€ìƒ‰ ì¤‘... (rag/documents/)
[10:30:03] âœ… RAG ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘ ì™„ë£Œ (3ê°œ ë¬¸ì„œ)
[10:30:04] ğŸŒ ì›¹ ê²€ìƒ‰ ìŠ¤í‚µ (RAG ì¶©ë¶„)
[10:30:05] ğŸ” Analyzer: ìš”ì²­ ë¶„ì„ ì¤‘...
[10:30:08] âœ… ë¶„ì„ ì™„ë£Œ - ì£¼ì œ: "ë°°ë‹¬ ì•± ê¸°íš"
[10:30:09] ğŸ“‹ Structurer: êµ¬ì¡° ì„¤ê³„ ì¤‘...
[10:30:12] âœ… êµ¬ì¡° ì™„ë£Œ - 8ê°œ ì„¹ì…˜
[10:30:13] âœï¸ Writer: ì½˜í…ì¸  ì‘ì„± ì¤‘...
[10:30:25] âœ… ì´ˆì•ˆ ì‘ì„± ì™„ë£Œ
[10:30:26] ğŸ” Reviewer: í’ˆì§ˆ ê²€í†  ì¤‘...
[10:30:30] âœ… ê²€í†  ì™„ë£Œ - ì ìˆ˜: 8.5/10
[10:30:31] âœ¨ Refiner: í”¼ë“œë°± ë°˜ì˜ ì¤‘...
[10:30:38] âœ… ìµœì¢…ë³¸ ì™„ì„±
[10:30:39] ğŸ“ Formatter: ìš”ì•½ ìƒì„± ì¤‘...
[10:30:41] âœ… ì™„ë£Œ!
[10:30:41] â±ï¸ ì´ ì†Œìš” ì‹œê°„: 40ì´ˆ
```

### ì¶œë ¥ ì˜ˆì‹œ

| ì¶œë ¥ë¬¼ | ì„¤ëª… | ìœ„ì¹˜ |
|--------|------|------|
| **ê¸°íšì„œ** | ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ì „ì²´ ê¸°íšì„œ | UI í™”ë©´ / `outputs/` |
| **ìš”ì•½** | ì±„íŒ…ìš© ê°„ë‹¨ ìš”ì•½ ë©”ì‹œì§€ | UI ì±„íŒ…ì°½ |
| **ë¡œê·¸** | ì‹¤í–‰ ì´ë ¥ JSONL | `logs/execution_*.jsonl` |

### ì—ëŸ¬ ë°œìƒ ì‹œ

```
âŒ í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤
   â†’ .env.local íŒŒì¼ í™•ì¸

âš ï¸ ë²¡í„°ìŠ¤í† ì–´ê°€ ì—†ìŠµë‹ˆë‹¤
   â†’ RAG ì¸ë±ìŠ¤ ì´ˆê¸°í™” í•„ìš”
   â†’ python -c "from rag.vectorstore import init_vectorstore; init_vectorstore()"

âš ï¸ Azure OpenAI ì—°ê²° ì‹¤íŒ¨
   â†’ AOAI_ENDPOINT, AOAI_API_KEY í™•ì¸
```

---

## ï¿½ğŸ“ ì „ì²´ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
plancraft/
â”œâ”€â”€ ğŸ“„ app.py                      # Streamlit ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ ğŸ“„ requirements.txt            # Python ì˜ì¡´ì„±
â”œâ”€â”€ ğŸ“„ Dockerfile                  # Docker ì´ë¯¸ì§€ ë¹Œë“œ
â”œâ”€â”€ ğŸ“„ docker-compose.yml          # Docker Compose ì„¤ì •
â”œâ”€â”€ ğŸ“„ .dockerignore               # Docker ë¹Œë“œ ì œì™¸ íŒŒì¼
â”œâ”€â”€ ğŸ“„ .gitignore                  # Git ì¶”ì  ì œì™¸ íŒŒì¼
â”œâ”€â”€ ğŸ“„ .env.example                # í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿
â”œâ”€â”€ ğŸ“„ README.md                   # í”„ë¡œì íŠ¸ ì†Œê°œ
â”œâ”€â”€ ğŸ“„ CHANGELOG.md                # ë³€ê²½ ì´ë ¥
â”‚
â”œâ”€â”€ ğŸ“‚ agents/                     # ğŸ¤– AI ì—ì´ì „íŠ¸ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ analyzer.py                # ìš”ì²­ ë¶„ì„ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ structurer.py              # êµ¬ì¡° ì„¤ê³„ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ writer.py                  # ì½˜í…ì¸  ì‘ì„± ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ reviewer.py                # í’ˆì§ˆ ê²€í†  ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ refiner.py                 # í”¼ë“œë°± ë°˜ì˜ ì—ì´ì „íŠ¸
â”‚   â””â”€â”€ formatter.py               # ì¶œë ¥ í¬ë§·íŒ… ì—ì´ì „íŠ¸
â”‚
â”œâ”€â”€ ğŸ“‚ graph/                      # ğŸ”„ LangGraph ì›Œí¬í”Œë¡œìš°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ state.py                   # TypedDict ìƒíƒœ ì •ì˜
â”‚   â”œâ”€â”€ workflow.py                # ë©”ì¸ ì›Œí¬í”Œë¡œìš° ê·¸ë˜í”„
â”‚   â”œâ”€â”€ subgraphs.py               # ì„œë¸Œê·¸ë˜í”„ ì •ì˜
â”‚   â””â”€â”€ interrupt_utils.py         # Human-in-the-loop ìœ í‹¸
â”‚
â”œâ”€â”€ ğŸ“‚ prompts/                    # ğŸ’¬ ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ analyzer_prompt.py         # Analyzer í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ structurer_prompt.py       # Structurer í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ writer_prompt.py           # Writer í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ reviewer_prompt.py         # Reviewer í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ refiner_prompt.py          # Refiner í”„ë¡¬í”„íŠ¸
â”‚   â””â”€â”€ formatter_prompt.py        # Formatter í”„ë¡¬í”„íŠ¸
â”‚
â”œâ”€â”€ ğŸ“‚ rag/                        # ğŸ“š RAG (ê²€ìƒ‰ ì¦ê°• ìƒì„±)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ vectorstore.py             # FAISS ë²¡í„°ìŠ¤í† ì–´
â”‚   â”œâ”€â”€ retriever.py               # ë¬¸ì„œ ê²€ìƒ‰ê¸°
â”‚   â”œâ”€â”€ embedder.py                # ì„ë² ë”© ìƒì„±
â”‚   â”œâ”€â”€ ğŸ“‚ documents/              # RAG ì†ŒìŠ¤ ë¬¸ì„œ
â”‚   â”‚   â””â”€â”€ *.md                   # ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œë“¤
â”‚   â”œâ”€â”€ ğŸ“‚ examples/               # ì˜ˆì œ ê¸°íšì„œ
â”‚   â”‚   â””â”€â”€ *.md                   # ì°¸ê³  ê¸°íšì„œë“¤
â”‚   â””â”€â”€ ğŸ“‚ faiss_index/            # ë²¡í„° ì¸ë±ìŠ¤ ì €ì¥ì†Œ
â”‚       â”œâ”€â”€ index.faiss
â”‚       â””â”€â”€ index.pkl
â”‚
â”œâ”€â”€ ğŸ“‚ tools/                      # ğŸ”§ ì™¸ë¶€ ë„êµ¬ í†µí•©
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ web_search.py              # ì›¹ ê²€ìƒ‰ (DuckDuckGo)
â”‚   â”œâ”€â”€ web_client.py              # ì›¹ í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ mcp_client.py              # MCP í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ file_utils.py              # íŒŒì¼ ì²˜ë¦¬ ìœ í‹¸
â”‚
â”œâ”€â”€ ğŸ“‚ ui/                         # ğŸ¨ Streamlit UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ components.py              # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ dialogs.py                 # ëŒ€í™” ìƒì
â”‚   â”œâ”€â”€ dynamic_form.py            # ë™ì  í¼
â”‚   â””â”€â”€ refinement.py              # í”¼ë“œë°±/ê°œì„  UI
â”‚
â”œâ”€â”€ ğŸ“‚ utils/                      # ğŸ› ï¸ ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py                  # ì„¤ì • ê´€ë¦¬
â”‚   â”œâ”€â”€ llm.py                     # LLM í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ schemas.py                 # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ error_handler.py           # ì˜¤ë¥˜ ì²˜ë¦¬
â”‚   â”œâ”€â”€ file_logger.py             # íŒŒì¼ ë¡œê¹…
â”‚   â”œâ”€â”€ example_selector.py        # ì˜ˆì œ ì„ íƒê¸°
â”‚   â”œâ”€â”€ prompt_examples.py         # í”„ë¡¬í”„íŠ¸ ì˜ˆì œ
â”‚   â””â”€â”€ streamlit_callback.py      # Streamlit ì½œë°±
â”‚
â”œâ”€â”€ ğŸ“‚ tests/                      # ğŸ§ª í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â”œâ”€â”€ test_agents.py             # ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_scenarios.py          # ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_workflow_routing.py   # ì›Œí¬í”Œë¡œìš° ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_interrupt_unit.py     # ì¸í„°ëŸ½íŠ¸ ìœ ë‹› í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_time_travel.py        # íƒ€ì„íŠ¸ë˜ë¸” í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ test_mcp.py                # MCP í…ŒìŠ¤íŠ¸
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                       # ğŸ“– ë¬¸ì„œ
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md       # í”„ë¡œì íŠ¸ êµ¬ì¡° (ì´ ë¬¸ì„œ)
â”‚   â”œâ”€â”€ architecture.md            # ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
â”‚   â”œâ”€â”€ architecture.mermaid       # ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨
â”‚   â”œâ”€â”€ agent-design.md            # ì—ì´ì „íŠ¸ ì„¤ê³„
â”‚   â”œâ”€â”€ api-spec.md                # API ëª…ì„¸
â”‚   â”œâ”€â”€ web-search-design.md       # ì›¹ ê²€ìƒ‰ ì„¤ê³„
â”‚   â”œâ”€â”€ DEPLOYMENT.md              # Docker ë°°í¬ ê°€ì´ë“œ
â”‚   â””â”€â”€ deployment-guide.md        # ì „ì²´ ë°°í¬ ê°€ì´ë“œ
â”‚
â”œâ”€â”€ ğŸ“‚ logs/                       # ğŸ“‹ ì‹¤í–‰ ë¡œê·¸ (Git ì œì™¸)
â”œâ”€â”€ ğŸ“‚ outputs/                    # ğŸ“¤ ì¶œë ¥ íŒŒì¼ (Git ì œì™¸)
â””â”€â”€ ğŸ“‚ .agent/                     # ğŸ¤– ì—ì´ì „íŠ¸ ì„¤ì •
```

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Streamlit UI                                â”‚
â”‚                                (app.py)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ì…ë ¥ í¼   â”‚  â”‚  ì§„í–‰ ìƒíƒœ  â”‚  â”‚ ê¸°íšì„œ ì¶œë ¥ â”‚  â”‚  í”¼ë“œë°± UI  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LangGraph Workflow                               â”‚
â”‚                        (graph/workflow.py)                               â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚retrieve â”‚ â†’ â”‚fetch_webâ”‚ â†’ â”‚ analyze â”‚ â†’ â”‚structureâ”‚ â†’ â”‚  write  â”‚   â”‚
â”‚  â”‚  (RAG)  â”‚   â”‚(ì¡°ê±´ë¶€) â”‚   â”‚         â”‚   â”‚         â”‚   â”‚         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚         â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                              â–¼                                           â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                        â”‚ review  â”‚ â†’ â”‚ refine  â”‚ â†’ â”‚ format  â”‚ â†’ END    â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                   â”‚                        â”‚
            â–¼                   â–¼                        â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  RAG/FAISS  â”‚     â”‚ Web Search  â”‚         â”‚ Azure OpenAIâ”‚
     â”‚   (rag/)    â”‚     â”‚ (DuckDuckGo)â”‚         â”‚  (GPT-4o)   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– ì—ì´ì „íŠ¸ íŒŒì´í”„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        6 Agent Pipeline                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  User Input                                                       â”‚
â”‚      â”‚                                                            â”‚
â”‚      â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚Analyzer â”‚ â”€â”€â–¶ â”‚Structurer â”‚ â”€â”€â–¶ â”‚ Writer  â”‚                  â”‚
â”‚  â”‚(ë¶„ì„)   â”‚     â”‚(êµ¬ì¡°ì„¤ê³„) â”‚     â”‚(ì‘ì„±)   â”‚                  â”‚
â”‚  â”‚temp=0.3 â”‚     â”‚ temp=0.5  â”‚     â”‚temp=0.7 â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                  â”‚
â”‚                                         â”‚                        â”‚
â”‚                                         â–¼                        â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                                    â”‚Reviewer â”‚                   â”‚
â”‚                                    â”‚(ê²€í† )   â”‚                   â”‚
â”‚                                    â”‚temp=0.3 â”‚                   â”‚
â”‚                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â”‚
â”‚                                         â”‚                        â”‚
â”‚                                         â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚Formatterâ”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ Refiner â”‚                   â”‚
â”‚  â”‚(í¬ë§·)   â”‚                      â”‚(ê°œì„ )   â”‚                   â”‚
â”‚  â”‚temp=0.5 â”‚                      â”‚temp=0.5 â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚       â”‚                                                          â”‚
â”‚       â–¼                                                          â”‚
â”‚  ğŸ“„ Final Output (ê¸°íšì„œ + ìš”ì•½)                                 â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ë°ì´í„° íë¦„ (State)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PlanCraftState (TypedDict)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“¥ Input Fields                                                â”‚
â”‚  â”œâ”€â”€ user_input: str           # ì‚¬ìš©ì ìš”ì²­                   â”‚
â”‚  â”œâ”€â”€ file_content: str         # ì—…ë¡œë“œ íŒŒì¼                   â”‚
â”‚  â””â”€â”€ thread_id: str            # ì„¸ì…˜ ID                       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“¤ Output Fields                                               â”‚
â”‚  â”œâ”€â”€ final_output: str         # ìµœì¢… ê¸°íšì„œ                   â”‚
â”‚  â”œâ”€â”€ chat_summary: str         # ì±„íŒ… ìš”ì•½                     â”‚
â”‚  â””â”€â”€ step_history: List[dict]  # ì‹¤í–‰ ì´ë ¥                     â”‚
â”‚                                                                 â”‚
â”‚  âš™ï¸ Internal Fields                                             â”‚
â”‚  â”œâ”€â”€ rag_context: str          # RAG ê²€ìƒ‰ ê²°ê³¼                 â”‚
â”‚  â”œâ”€â”€ web_context: str          # ì›¹ ê²€ìƒ‰ ê²°ê³¼                  â”‚
â”‚  â”œâ”€â”€ analysis: dict            # Analyzer ì¶œë ¥                 â”‚
â”‚  â”œâ”€â”€ structure: dict           # Structurer ì¶œë ¥               â”‚
â”‚  â”œâ”€â”€ draft: dict               # Writer ì¶œë ¥                   â”‚
â”‚  â””â”€â”€ review: dict              # Reviewer ì¶œë ¥                 â”‚
â”‚                                                                 â”‚
â”‚  ğŸ·ï¸ Metadata                                                    â”‚
â”‚  â”œâ”€â”€ current_step: str         # í˜„ì¬ ë‹¨ê³„                     â”‚
â”‚  â”œâ”€â”€ step_status: str          # ìƒíƒœ (RUNNING/SUCCESS/FAILED) â”‚
â”‚  â””â”€â”€ refine_count: int         # ê°œì„  íšŸìˆ˜ (0~3)              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

| ê³„ì¸µ | ê¸°ìˆ  | ì„¤ëª… |
|------|------|------|
| **Frontend** | Streamlit | ì¸í„°ë™í‹°ë¸Œ ì›¹ UI |
| **Workflow** | LangGraph | ìƒíƒœ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš° |
| **LLM Framework** | LangChain | LLM ì¶”ìƒí™” |
| **LLM** | Azure OpenAI | GPT-4o, GPT-4o-mini |
| **Vector DB** | FAISS | ë²¡í„° ê²€ìƒ‰ |
| **Embedding** | text-embedding-3-large | í…ìŠ¤íŠ¸ ì„ë² ë”© |
| **Web Search** | DuckDuckGo / Tavily | ì›¹ ê²€ìƒ‰ |
| **Validation** | Pydantic | ë°ì´í„° ê²€ì¦ |
| **Container** | Docker | ì»¨í…Œì´ë„ˆí™” |

---

## ğŸ“‚ ì£¼ìš” íŒŒì¼ ì„¤ëª…

### í•µì‹¬ íŒŒì¼

| íŒŒì¼ | í¬ê¸° | ì„¤ëª… |
|------|------|------|
| `app.py` | 24KB | Streamlit ë©”ì¸ ì•± |
| `graph/workflow.py` | 29KB | LangGraph ì›Œí¬í”Œë¡œìš° ë©”ì¸ |
| `graph/state.py` | 8KB | ìƒíƒœ ì •ì˜ ë° í—¬í¼ í•¨ìˆ˜ |
| `utils/schemas.py` | 10KB | Pydantic ìŠ¤í‚¤ë§ˆ |
| `tools/mcp_client.py` | 16KB | MCP ì›¹ ê²€ìƒ‰ í´ë¼ì´ì–¸íŠ¸ |

### í”„ë¡¬í”„íŠ¸ íŒŒì¼

| íŒŒì¼ | í¬ê¸° | ì—ì´ì „íŠ¸ |
|------|------|----------|
| `prompts/analyzer_prompt.py` | 8KB | Analyzer |
| `prompts/writer_prompt.py` | 9KB | Writer |
| `prompts/structurer_prompt.py` | 5KB | Structurer |
| `prompts/reviewer_prompt.py` | 5KB | Reviewer |
| `prompts/refiner_prompt.py` | 4KB | Refiner |
| `prompts/formatter_prompt.py` | 2KB | Formatter |

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

```bash
# 1. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env.local
# .env.local ìˆ˜ì •

# 3. RAG ì¸ë±ìŠ¤ ì´ˆê¸°í™”
python -c "from rag.vectorstore import init_vectorstore; init_vectorstore()"

# 4. ì‹¤í–‰
streamlit run app.py
```

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](architecture.md)
- [ì—ì´ì „íŠ¸ ì„¤ê³„](agent-design.md)
- [API ëª…ì„¸](api-spec.md)
- [ë°°í¬ ê°€ì´ë“œ](deployment-guide.md)
- [Docker ë°°í¬](DEPLOYMENT.md)
